# PX4-Autopilot-contrib
This repository contains all models and components built by Constantine Cheng during the MEng project of Summer 2021. scripts/aruco_estimation.py is mostly Eric Chau's work but have been modified to adapt the simulation environment. The commits are already integrated to FSC-Lab/PX4-Autopilot by Helson Go. The supposed path and description for each file in this repository are stated below:

* **fsc_models:** all models created for simulating a vision-based slung payload system. This folder contains three models: single_iris_payload: one iris UAV carrying a payload; single_iris_payload_visual: one iris UAV with cameras carrying a payload; single_iris_payload_visual_aruco: one iris UAV with cameras carrying a payload with ArUco markers on it as identifiers. The original folder is located at `FSC-Lab/PX4-Autopilot/`
* **fsc_worlds:** this folder contains a copy of windy.world by PX4 that is used to modify the properties of winds for simlations without making modifications to Tools, a submodule of PX4-Autopilot. The original folder is located at `FSC-Lab/PX4-Autopilot/`
* **scripts/aruco_combine.py:** this file is used to apply ArUco markers on the surface of the payload. The scripts will generate and organize ArUco markers to fit the format required by Blender unwrapped design. Also, based on a provided proto design file `scripts/dae_struct.dae`, identifiers on payloads can easily be replaced by generating new markers and creating new .dae file. The original file is located at `FSC-Lab/PX4-Autopilot/scripts`
* **scripts/aruco_estimation.py:** this file contains the payload pose estimation system created by Eric Chau. The original estimation script is modified by adding new ArUco marker IDs, calculating and applying the relative poses of markers at each side of the payload wrt the pose of the payload for averaging pose estimations made by each marker, and updating ROS topics and message types to adapt PX4 Autopilot. The original file is located at `FSC-Lab/PX4-Autopilot/scripts`
* **scripts/rosbag_writer.py:** this file is used to write topics containing the pose of payloads wrt the inertial frame and camera to a rosbag file. The original file is located at `FSC-Lab/PX4-Autopilot/scripts`
* **Single_drone_payload_estimation.md:** this file is a user manual for running simulations of the slung payload system and the payload pose estimation component. The original file is located at `FSC-Lab/PX4-Autopilot/`
* **single_iris_payload.launch**: this launch file is used to launch a simulation session with `single_iris_payload` model. The original file is located at `FSC-Lab/PX4-Autopilot/launch`
* **single_iris_payload_visual.launch**: this launch file is used to launch a simulation session with `single_iris_payload_visual` model. The original file is located at `FSC-Lab/PX4-Autopilot/launch`
* **single_iris_payload_visual_aruco.launch**: this launch file is used to launch a simulation session with `single_iris_payload_visual_aruco` model. The original file is located at `FSC-Lab/PX4-Autopilot/launch`
